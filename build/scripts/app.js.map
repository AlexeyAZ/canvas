{"version":3,"sources":["app.js"],"names":["app","load","events","BODY","document","body","canvas","getElementById","context","getContext","timer","currentFrame","moveStatus","rectOptions","left","top","width","height","addEventListener","e","mousePos","getClickCoords","revert","x","y","length","clearInterval","drawRect","moveRect","draw","event","rect","getBoundingClientRect","clientX","clientY","window","resizeCanvas","querySelector","clientWidth","clearRect","options","fillRect","maxValueX","Math","max","minValueX","min","maxValueY","minValueY","pathLength","sqrt","pow","coef","points","j","kLength","k","kX","kY","push","points1","i","move","setTimeout","keyDownHandler","key","which"],"mappings":"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","file":"app.js","sourcesContent":["/*global $*/\r\n\r\nvar app = {\r\n\r\n\tload: function() {\r\n\t\tapp.events();\r\n\t},\r\n\r\n\tevents: function() {\r\n\t\tvar BODY = document.body;\r\n\t\tvar canvas = document.getElementById(\"canvas\");\r\n\t\tvar context = canvas.getContext(\"2d\");\r\n\t\tvar timer;\r\n\t\tvar currentFrame;\r\n\t\tvar moveStatus = [];\r\n\r\n\t\tvar rectOptions = {\r\n\t\t\tleft: 100,\r\n\t\t\ttop: 100,\r\n\t\t\twidth: 50,\r\n\t\t\theight: 50\r\n\t\t};\r\n\r\n\t\tcanvas.addEventListener(\"click\", function(e) {\r\n\t\t\tcurrentFrame = -1;\r\n\t\t\tvar mousePos = getClickCoords(canvas, e);\r\n\t\t\tvar revert;\r\n\r\n\t\t\tif (mousePos.x < rectOptions.left || mousePos.y < rectOptions.top) {\r\n\t\t\t\trevert = true;\r\n\t\t\t} else {\r\n\t\t\t\trevert = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (moveStatus.length) {\r\n\t\t\t\tclearInterval(timer);\r\n\t\t\t\tdrawRect({left:moveStatus[moveStatus.length - 1][0], top: moveStatus[moveStatus.length - 1][1], width:rectOptions.width, height: rectOptions.height});\r\n\t\t\t\tmoveRect(mousePos.x, mousePos.y, revert);\r\n\t\t\t} else {\r\n\t\t\t\tmoveRect(mousePos.x, mousePos.y, revert);\r\n\t\t\t}\r\n\t\t\tdraw();\r\n\t\t});\r\n\r\n\t\tfunction getClickCoords(canvas, event) {\r\n\t\t\tvar rect = canvas.getBoundingClientRect();\r\n\r\n\t\t\treturn {\r\n\t\t\t\tx: event.clientX - rect.left,\r\n\t\t\t\ty: event.clientY - rect.top\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\twindow.addEventListener(\"resize\", resizeCanvas);\r\n\r\n\t\tfunction resizeCanvas() {\r\n\t\t\tcanvas.height = \"400\";\r\n\t\t\tcanvas.width = document.querySelector(\".canvas__wrap\").clientWidth;\r\n\r\n\t\t\tdraw();\r\n\t\t}\r\n\t\tresizeCanvas();\r\n\r\n\t\tfunction draw() {\r\n\t\t\tcontext.clearRect(0,0, canvas.width, canvas.height);\r\n\r\n\t\t\tdrawRect(rectOptions);\r\n\t\t}\r\n\r\n\t\tfunction drawRect(options) {\r\n\t\t\tcontext.fillRect(options.left,options.top,options.width,options.height);\r\n\t\t}\r\n\r\n\t\tfunction moveRect(x, y, revert) {\r\n\t\t\tvar maxValueX = Math.max(rectOptions.left + rectOptions.width / 2, x);\r\n\t\t\tvar minValueX = Math.min(rectOptions.left + rectOptions.width / 2, x);\r\n\r\n\t\t\t\r\n\t\t\tvar maxValueY = Math.max(rectOptions.top + rectOptions.height / 2, y);\r\n\t\t\tvar minValueY = Math.min(rectOptions.top + rectOptions.height / 2, y);\r\n\r\n\t\t\tvar pathLength = Math.sqrt(Math.pow(maxValueY - minValueY, 2) + Math.pow(maxValueX - minValueX, 2));\r\n\t\t\t\r\n\t\t\tvar coef = 100;\r\n\t\t\tvar points = [];\r\n\t\t\tfor (var j = 1; j <= coef; j++) {\r\n\t\t\t\tvar kLength = pathLength / coef * j;\r\n\t\t\t\tvar k = kLength / pathLength;\r\n\t\t\t\tvar kX = minValueX + (maxValueX - minValueX) * k;\r\n\t\t\t\tvar kY = minValueY + (maxValueY - minValueY) * k;\r\n\r\n\t\t\t\tpoints.push([kX, kY]);\r\n\t\t\t}\r\n\r\n\t\t\tif (revert === true) {\r\n\t\t\t\tvar points1 = [];\r\n\t\t\t\tfor (var i = points.length - 1; i > 0; i--) {\r\n\t\t\t\t\tpoints1.push(points[i]);\r\n\t\t\t\t}\r\n\t\t\t\tpoints = points1;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfunction move() {\r\n\t\t\t\tcurrentFrame++;\r\n\r\n\t\t\t\trectOptions.left = points[currentFrame][0] - rectOptions.width / 2;\r\n\t\t\t\trectOptions.top = points[currentFrame][1] - rectOptions.height / 2;\r\n\t\t\t\t\r\n\t\t\t\tdraw();\r\n\r\n\t\t\t\tif (currentFrame < points.length) {\r\n\t\t\t\t\tmoveStatus.push([points[currentFrame][0], points[currentFrame][1]]);\r\n\t\t\t\t\ttimer = setTimeout(move, 1000 / 60);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclearInterval(timer);\r\n\t\t\t\t\tmoveStatus = [];\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmove();\r\n\t\t}\r\n\r\n\t\twindow.addEventListener(\"keydown\", keyDownHandler);\r\n\r\n\t\tfunction keyDownHandler(event){\r\n\t\t\tvar key = event.which;\r\n\r\n\t\t\tif (key === 83) {\r\n\t\t\t\trectOptions.top += 1;\r\n\t\t\t}\r\n\r\n\t\t\tdraw();\r\n\r\n\t\t}\r\n\t}\r\n}\r\n\r\nwindow.addEventListener(\"load\", app.load);"]}